<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <!-- IMPORT SCRIPTS & STYLES -->
     <link rel="stylesheet" href="node_modules/bootstrap/dist/css/bootstrap.min.css">
     <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js" integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q" crossorigin="anonymous"></script>
     <script src="node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
     <script src="node_modules/axios/dist/axios.min.js"></script>
     <script src="mainLogic.js"></script>
     <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />

     <style>
     body {
      font-family: sans-serif;
      background-color: #fff;
      color: #000;
      transition: background 0.3s ease, color 0.3s ease;
    }

    body.dark {
      background-color: #000;
      color: #fff;
    }

    .toggle-btn {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      border: none;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      cursor: pointer;
      background: #f0f0f0;
      transition: background 0.3s ease;
    }

    body.dark .toggle-btn {
      background: #1a1a1a;
      color: #fff;
    }

    .posts {
      margin-top: 20px;
    }

    .post {
      padding: 15px;
      margin: 10px;
      border-radius: 12px;
      background: #f6f6f6;
      transition: background 0.3s ease;
    }

    body.dark .post {
      background: #1e1e1e;
    }
    #add-btn{
      position: fixed;
      align-items: center;
      bottom: 5%;
      right:7%;
      height: 70px;
      width: 70px;
       font-size: 50px;
       color: white;
       border-radius: 100px;
       cursor: pointer;
       text-align: center;
       box-shadow: 0px 10px 10px rgba(0,0,0,0.3);
       background-color: aqua;
       padding: 0px 18px ;
       
    }
        /* ====loader styles */
    
.lds-roller,
.lds-roller div,
.lds-roller div:after {
  box-sizing: border-box;
}
.lds-roller {
  display: inline-block;
  position: relative;
  width: 80px;
  height: 80px;
}
.lds-roller div {
  animation: lds-roller 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;
  transform-origin: 40px 40px;
}
.lds-roller div:after {
  content: " ";
  display: block;
  position: absolute;
  width: 7.2px;
  height: 7.2px;
  border-radius: 50%;
  background: currentColor;
  margin: -3.6px 0 0 -3.6px;
}
.lds-roller div:nth-child(1) {
  animation-delay: -0.036s;
}
.lds-roller div:nth-child(1):after {
  top: 62.62742px;
  left: 62.62742px;
}
.lds-roller div:nth-child(2) {
  animation-delay: -0.072s;
}
.lds-roller div:nth-child(2):after {
  top: 67.71281px;
  left: 56px;
}
.lds-roller div:nth-child(3) {
  animation-delay: -0.108s;
}
.lds-roller div:nth-child(3):after {
  top: 70.90963px;
  left: 48.28221px;
}
.lds-roller div:nth-child(4) {
  animation-delay: -0.144s;
}
.lds-roller div:nth-child(4):after {
  top: 72px;
  left: 40px;
}
.lds-roller div:nth-child(5) {
  animation-delay: -0.18s;
}
.lds-roller div:nth-child(5):after {
  top: 70.90963px;
  left: 31.71779px;
}
.lds-roller div:nth-child(6) {
  animation-delay: -0.216s;
}
.lds-roller div:nth-child(6):after {
  top: 67.71281px;
  left: 24px;
}
.lds-roller div:nth-child(7) {
  animation-delay: -0.252s;
}
.lds-roller div:nth-child(7):after {
  top: 62.62742px;
  left: 17.37258px;
}
.lds-roller div:nth-child(8) {
  animation-delay: -0.288s;
}
.lds-roller div:nth-child(8):after {
  top: 56px;
  left: 12.28719px;
}
@keyframes lds-roller {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}

/* ========loader styles */

    .icons {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 15px;
      font-size: 30px;
    }

    .left-icons {
      display: flex;
      gap: 20px;
    }

    .material-symbols-outlined {
      cursor: pointer;
      transition: transform 0.2s ease, color 0.2s ease;
      color: #333;
      user-select: none;
    }

    .material-symbols-outlined:hover {
      transform: scale(1.2);
    }

    /* ========== toggle effect بالقلب والحفظ ========== */
    input[type="checkbox"] {
      display: none;
    }

    /* قلب */
    #like:checked + label .material-symbols-outlined {
      color: red;
      transform: scale(1.2);
    }

    /* حفظ */
    #save:checked + label .material-symbols-outlined {
      font-variation-settings: 'FILL' 1;
      transform: scale(1.2);
    }
    /* fgfg */
    #icons-div{
   
      width: 1350%;
      margin: 0px auto;
      direction: rtl;
      justify-content: space-between;
    }
    #heart{
      background: orange;
    }
</style>
 </head>
 <body>
   <!-- LOADER -->
   <div class="loader" style="position: fixed;
       top: 0px;
       bottom: 0px;
        left: 0px;
        right: 0px;
        margin: auto;
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 9999;
        width: 100px;
        height: 100px;
        border-radius: 12%;
        color: white;
        background: rgba(204, 202, 202, 0.208);
        ">
      <div class="lds-roller">
        <div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div>
      </div>
   </div>

   <!-- == LIADER ==-->
    <!-- CREATE POST MODAL -->
   <div class="modal fade" id="createpostmodal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="exampleModalLabel" >Create a New Post</h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form>
            <div class="mb-3">
              <label for="recipient-name" class="col-form-label">Title</label>
              <input type="text" class="form-control"  id="create-post-title-input">
            </div>
              <div class="mb-3">
              <label for="recipient-name" class="col-form-label">Body</label>
              <textarea name="" id="create-post-body-input" style="width: 100%;height: 100px;color: gray;border-radius: 10px ;resize: none;"></textarea>
              
            </div>
             <div class="mb-3">
              <label for="recipient-name" class="col-form-label">image</label>
              <input type="file" class="form-control"  id="create-post-image-input">
            </div>
          
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Close</button>
          <button type="button" class="btn btn-outline-danger" onclick="CreateNewPost()">Create</button>
        </div>
      </div>
    </div>
  </div>
   <!-- ==CREATE POST MODAL -->
  <!-- LOGIN modall -->
  <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="exampleModalLabel" >Login</h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form>
            <div class="mb-3">
              <label for="recipient-name" class="col-form-label">Username</label>
              <input type="text" class="form-control"  id="username-input">
            </div>
            <div class="mb-3">
              <label for="message-text" class="col-form-label">Password</label>
              <input type="password" class="form-control"  id="password-input">
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Close</button>
          <button type="button" class="btn btn-outline-danger" onclick="loginbtnClicked()">Login</button>
        </div>
      </div>
    </div>
  </div>
   <!-- /// LOGIN modall -->
    <!--  -->
   <!-- Rege modal -->


<div class="modal fade" id="exampleModal2" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="exampleModalLabel">Regester A User</h1>
        <button type="file" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form>
          
           <div class="mb-3">
            <label for="recipient-name" class="col-form-label">name:</label>
            <input type="text" class="form-control" id="regester-name">
          </div>
          <div class="mb-3">
            <label for="recipient-name" class="col-form-label">Username:</label>
            <input type="text" class="form-control" id="regester-username">
          </div>
           <div class="mb-3">
            <label for="message-text" class="col-form-label">Password:</label>
             <input type="password" class="form-control" id="regester-password">
            
          </div>
          <div class="mb-3">
            <label for="recipient-name" class="col-form-label">Profile Image:</label>
            <input type="file" class="form-control" id="regester-imginput">
          </div>
         
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Close</button>
        <button type="button" class="btn btn-success" onclick="registerBtnClicked()">Regester</button>
      </div>
    </div>
  </div>
</div>
    <!-- //Rege modal -->
    <!--  -->
       <!-- NAVICATION BAR -->
    <div class="container ">
        <div class="d-flex justify-content-center">
            <div class="col-9">
                <nav class="navbar navbar-expand-lg bg-body-tertiary shadow rounded pt-3">
                    <div class="container-fluid">
                      <a class="navbar-brand" href="#"> Instgram</a>
                       <button id="themeToggle" class="toggle-btn" onclick="mood()">☀</button>
                      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                      </button>
                      <div class="collapse navbar-collapse" id="navbarNav">
                        <ul class="navbar-nav">
                          <li class="nav-item">
                              <a class="nav-link"  onclick="profileClicked()" style="cursor: pointer;">
                               <span class="material-symbols-outlined" style="color: black;font-size: 30px;">account_circle</span>

                               </a>
                           </li>
                          <li class="nav-item">
                              
                            <a class="nav-link active pulse" aria-current="page" href="home.html">
                               <span class="material-symbols-outlined" style="color: black;font-size: 30px;" >home</span>
                              </a>
                          </li>
              
                         
                        </ul>
                        <!-- NON LOGEGED IN USER -->
                        <div class="d-flex w-100 justify-content-end " id="loginbtn-div
">
                        <button  id ="loginbtn" type="button" class="btn btn-outline-success mx-3" data-bs-toggle="modal" data-bs-target="#exampleModal"  >Login</button>
                        <button id="regestbtn" type="button" class="btn btn-success mx-3" data-bs-toggle="modal" data-bs-target="#exampleModal2" data-bs-whatever="@mdo"  >Regester</button>
                        </div>
                         <!--// NON LOGEGED IN USER -->

                          <!-- FOR LOGEGED IN USER -->
                            <div class="d-flex w-100 justify-content-end align-items-center" id="logOut-div">
                            
                              <img src="images/000.jpg" id="nav-user-img" alt="" class="rounded-circle" style="width: 40px;height: 40px;align-items:center;">
                               <b id="nav-username"></b>
                              <button  id ="logoutbtn" onclick="logOut()" type="button" class="btn btn-outline-danger mx-3"  >Log out</button>
                        
                        
                        </div>
                           <!-- FOR LOGEGED IN USER -->
        
                      </div>
                    </div>
                  </nav>
            </div>
        </div>
       
        
    </div>
    <!--// NAVICATION BAR -->
       <!-- MAIN CONTAINT -->
    <div class="container " style="height: 1000px;"   >
        <!--USRE'S  POSTS -->
        <div class="d-flex justify-content-center mt-3">
          <div class="col-9">
                 <h1>
            <span id="username-span">
                Sana's Post
            </span>
           </h1>
          
          </div>
         
          </div>
           <div class="container " style="height: 1000px;" >
             <div class="d-flex justify-content-center mt-3">
                                     <!-- POST -->
           <div class="d-flex justify-content-center mt-3"  >
            <div class="col-9">
                <div class="card shadow my-2" id="posts">
              <div class="card-header">
                <img src=${author.profile_image} alt="" style="width: 40px;height: 40px;" class="rounded-circle border border-3" >
                <b>sanatayshoori</b>
              </div>
              <div class="card-body">
               <img src='images/000.jpg' alt="" class="w-100 " >
               <p style="color: rgb(118, 118, 118);font-size: smaller;" class="mt-1">
                
               <div style="display: flex;">
                  <div style="width: 50%;margin-top: -4px;">
                    <div style="float: left;width:15%;">
                      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-bookmarks" viewBox="0 0 16 16">
                        <path d="M2 4a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v11.5a.5.5 0 0 1-.777.416L7 13.101l-4.223 2.815A.5.5 0 0 1 2 15.5zm2-1a1 1 0 0 0-1 1v10.566l3.723-2.482a.5.5 0 0 1 .554 0L11 14.566V4a1 1 0 0 0-1-1z"/>
                        <path d="M4.268 1H12a1 1 0 0 1 1 1v11.768l.223.148A.5.5 0 0 0 14 13.5V2a2 2 0 0 0-2-2H6a2 2 0 0 0-1.732 1"/>
                      </svg>
                     </div>
                     <!-- /// -->
                     <div style="float: left;width:15%; margin-left: 20px;">
                      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-cursor-fill" viewBox="0 0 16 16">
                        <path d="M14.082 2.182a.5.5 0 0 1 .103.557L8.528 15.467a.5.5 0 0 1-.917-.007L5.57 10.694.803 8.652a.5.5 0 0 1-.006-.916l12.728-5.657a.5.5 0 0 1 .556.103z"/>
                      </svg>
                    </div>
                  </div>
                 <div style="float: left;width:80%;display: flex;">
               
                   <div style="display: flex;justify-content:end;width:90%;">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><path d="M1 2.75C1 1.784 1.784 1 2.75 1h10.5c.966 0 1.75.784 1.75 1.75v7.5A1.75 1.75 0 0 1 13.25 12H9.06l-2.573 2.573A1.458 1.458 0 0 1 4 13.543V12H2.75A1.75 1.75 0 0 1 1 10.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h2a.75.75 0 0 1 .75.75v2.19l2.72-2.72a.749.749 0 0 1 .53-.22h4.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path></svg>
                   </div>
                    <div style="display: flex;justify-content: end;width: 20%;">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-heart" viewBox="0 0 16 16">
                      <path d="m8 2.748-.717-.737C5.6.281 2.514.878 1.4 3.053c-.523 1.023-.641 2.5.314 4.385.92 1.815 2.834 3.989 6.286 6.357 3.452-2.368 5.365-4.542 6.286-6.357.955-1.886.838-3.362.314-4.385C13.486.878 10.4.28 8.717 2.01zM8 15C-7.333 4.868 3.279-3.04 7.824 1.143q.09.083.176.171a3 3 0 0 1 .176-.17C12.72-3.042 23.333 4.867 8 15"/>
                    </svg>
                    </div>
                  </div>
                  <hr>
                 </div>
                 <hr style="margin-top: -5px;">
                  <div style="float: right;width:100%;justify-content: end;display: flex;margin-top: -20px;font-size: smaller;">
               <p> 2 min</p>
              
               </div>
               <h3 style="margin-bottom: 20px;margin-top:-10px;"> hii</h3>
               <p style="margin-top:-10px;">
              Hello world
               </p>
               <p>
              
               </p>
              
                <div style="float: right;width:100%;justify-content: start;display: flex;font-size: smaller;">
                   <p> dshhfewi</p>
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pen" viewBox="0 0 16 16">
                    <path d="m13.498.795.149-.149a1.207 1.207 0 1 1 1.707 1.708l-.149.148a1.5 1.5 0 0 1-.059 2.059L4.854 14.854a.5.5 0 0 1-.233.131l-4 1a.5.5 0 0 1-.606-.606l1-4a.5.5 0 0 1 .131-.232l9.642-9.642a.5.5 0 0 0-.642.056L6.854 4.854a.5.5 0 1 1-.708-.708L9.44.854A1.5 1.5 0 0 1 11.5.796a1.5 1.5 0 0 1 1.998-.001m-.644.766a.5.5 0 0 0-.707 0L1.95 11.756l-.764 3.057 3.057-.764L14.44 3.854a.5.5 0 0 0 0-.708z"/>
                   </svg>
                  <span id="btn-tags">
                    
                    <button class="btn btn-sm rounded-5" style="background-color:gray;color:white" >
                   @sana.com
                     </button>
                     
                     </span>
                 
                 
              </div>
                   <hr>
                     <p>hello world</p>
               </div>
               <!-- comments -->
                 <!-- profile pic + username-->
                <!-- comments -->
                 <div id="comments">
                             <!-- comment body -->
                   <!-- <div class="p-3" style="background-color: rgb(252, 251, 251);" >
                    <div >
                    <img src="./images/123.jpg" alt="" class="rounded-circle" style="width: 40px;height: 40px">
                    <b>@sana</b>

                  </div>
                   <div>
                     Lorem ipsum dolor, sit amet consectetur adipisicing.
                   </div>
                   </div> -->
                   <!-- comments body -->
                                      <!-- comment body -->
                   <!-- <div class="p-3" style="background-color: rgb(252, 251, 251);" >
                    <div >
                    <img src="./images/123.jpg" alt="" class="rounded-circle" style="width: 40px;height: 40px">
                    <b>@sana</b>

                  </div>
                   <div>
                     Lorem ipsum dolor, sit amet consectetur adipisicing.
                   </div>
                   </div> -->
                   <!-- comments body -->
                                      <!-- comment body -->
                   <!-- <div class="p-3" style="background-color: rgb(252, 251, 251);" >
                    <div >
                    <img src="./images/123.jpg" alt="" class="rounded-circle" style="width: 40px;height: 40px">
                    <b>@sana</b>

                  </div>
                   <div>
                     Lorem ipsum dolor, sit amet consectetur adipisicing.
                   </div>
                   </div> -->
                   <!-- comments body -->
                 </div>
                <!-- comments -->
           
                  <!-- profile pic + username-->
                 <!-- comments -->
              <div>
              </div>
              </div>
            </div>
              
              </div> 
                 <!-- POST -->
             </div>
           </div>
          
         <div>
         </div>
      </div>
      
      
         <!-- //USRE'S POSTS -->
          <!-- ///////////////////////// -->
            <!-- /ALERTS -->
   <div id="success-alert" class="show fade" style="position: fixed; z-index: 999999;width: 30%;bottom: 0;right: 0;"></div>
    <!-- ////ALERTS -->
    </div>
    
    <!--// MAIN CONTAINT -->
    <script>
        // mode
     
       getPosts()
    setUpUi()
      
     function getcurrentpostId(){
        let posturl = new URLSearchParams(window.location.search)
     const Id =posturl.get("postId")
     console.log(Id)
     return Id
  }


  function createcommentclick(){
       let commentBody =document.getElementById("comment-input").value
      let params = {
        "body": commentBody
      }
      let token = localStorage.getItem("token")
      let  baseUrl ="https://tarmeezacademy.com/api/v1"
      let url = `${baseUrl}/posts/${id}/comments`
      axios.post(url,params,{
        headers : {
          "authorization" : `Bearer ${token}`
        }
      })
      .then((response)=>{
        showAlertt("add comment successfully","success")
        getPosts()
      })
  }

 </script>
</body> 
</html>